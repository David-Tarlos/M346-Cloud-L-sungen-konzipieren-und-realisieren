# Cloud-Init und SSH-Key Aufgabe

## A) Cloud-init Datei verstehen (10%)
- Die YAML-Datei befindet sich im **KN04-Ordner**.
- Sie definiert u. a. die Konfiguration von Usern und SSH-Keys für die Instanz.

## B) SSH-Key und Cloud-init (15%)

Erklärung Aufgabe: YAML ist eine Konfigurationsdatei, die beim ersten Start eines Linux-Servers automatisch von Cloud-Init ausgeführt wird. Dadurch wird z. B. der erste SSH-Key aus der YAML gesetzt und überschreibt andere Keys (wie den GUI-Key pem2). Das Beispiel mit SSH zeigt nur, dass Cloud-Init zuerst ausgeführt wird. Hauptsächlich wird Cloud-Init zur Automatisierung genutzt, z. B. um mehrere Server oder Laptops gleich zu konfigurieren, Pakete zu installieren oder Benutzer anzulegen. Das Log /var/log/cloud-init-output.log dokumentiert diese Ausführung.

### 1. Angepasste YAML
- Die angepasste YAML-Datei finden Sie im **KN04-Ordner**.
- Der **öffentliche SSH-Key** wurde für die Cloud-Init Konfiguration angepasst.

### 2. Details der Instanz
- Key-Pair ausgewählt beim Launch der Instanz: **pem2**
- Screenshot zeigt das Feld „Key pair assigned at launch“:

<img width="1616" height="680" alt="Details der Instanz" src="https://github.com/user-attachments/assets/5bb900f0-21d9-4da8-8ee9-4c19727ba21c" />

### 3. SSH-Befehl mit dem ersten Schlüssel (funktioniert)
- Verbindung nur mit dem Key aus der Cloud-Init YAML möglich.
- Screenshot zeigt erfolgreiche Anmeldung:

<img width="1390" height="783" alt="SSH mit erstem Schlüssel" src="https://github.com/user-attachments/assets/1e4831d6-0cc2-4d70-a856-a55282de26db" />

### 4. SSH-Befehl mit dem zweiten Schlüssel (funktioniert nicht)
- Verbindung schlägt fehl (Access Denied), da Cloud-Init Key den GUI-Key überschreibt.
- Screenshot zeigt die Fehlermeldung:

<img width="1339" height="109" alt="SSH mit zweitem Schlüssel" src="https://github.com/user-attachments/assets/25e56b4f-f9fa-4e1a-9936-dd5fdca2ce1d" />

### 5. Cloud-Init Log
- Log auf der Instanz abrufen:
```bash
sudo less /var/log/cloud-init-output.log
```
<img width="1817" height="957" alt="image" src="https://github.com/user-attachments/assets/31e075be-d9b0-4429-9bc9-e3599776e24d" />


D) Installation automatisieren (70%)
Konfigurationsdatei
Datenbank
Der Schlüssel bind-address wurde von 127.0.0.1 auf 0.0.0.0 geändert, um externe Verbindungen zur Datenbank zu ermöglichen.
<img width="919" height="672" alt="image" src="https://github.com/user-attachments/assets/63632211-f2c2-4611-a5bc-5b1817aab502" />
<img width="1064" height="82" alt="image" src="https://github.com/user-attachments/assets/89ef0c42-46b2-4ee1-a542-c48f9111d18a" />

Webserver
db.php
<img width="1919" height="806" alt="image" src="https://github.com/user-attachments/assets/305e6de1-fb3d-4554-8cfc-9cd3fc2309fb" />
index.html
<img width="1919" height="1031" alt="image" src="https://github.com/user-attachments/assets/8d8cd8c3-f7c3-4014-919d-7cc3c32f09d3" />
info.php

Adminer Login DB: 
<img width="1264" height="667" alt="image" src="https://github.com/user-attachments/assets/d3ceba7c-9a4a-4b8e-b6fe-6a4e83c3f8e6" />



